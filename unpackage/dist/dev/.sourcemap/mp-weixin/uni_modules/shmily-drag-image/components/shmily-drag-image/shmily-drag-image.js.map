{"version":3,"sources":[null,"webpack:///D:/Desktop/图片拖拽排序示例/uni_modules/shmily-drag-image/components/shmily-drag-image/shmily-drag-image.vue?f2f5","webpack:///D:/Desktop/图片拖拽排序示例/uni_modules/shmily-drag-image/components/shmily-drag-image/shmily-drag-image.vue?6efc","webpack:///D:/Desktop/图片拖拽排序示例/uni_modules/shmily-drag-image/components/shmily-drag-image/shmily-drag-image.vue?cf22","uni-app:///uni_modules/shmily-drag-image/components/shmily-drag-image/shmily-drag-image.vue","webpack:///D:/Desktop/图片拖拽排序示例/uni_modules/shmily-drag-image/components/shmily-drag-image/shmily-drag-image.vue?ac5d","webpack:///D:/Desktop/图片拖拽排序示例/uni_modules/shmily-drag-image/components/shmily-drag-image/shmily-drag-image.vue?c29b"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0I;AAC1I;AACqE;AACL;AACsC;;;AAGtG;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,wGAAM;AACR,EAAE,iHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA4oB,CAAgB,2nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6ChqB;AACA,uCADA;AAEA;AACA;AACA;AACA,iBADA;AAEA;AACA;AACA,OAJA,EAFA;;AAQA;AACA;AACA,iBADA;AAEA;AACA;AACA,OAJA,EATA;;AAeA;AACA;AACA,kBADA;AAEA,mBAFA,EAhBA;;AAoBA;AACA;AACA,kBADA;AAEA,gBAFA,EArBA;;AAyBA;AACA;AACA;AACA,kBADA;AAEA,gBAFA,EA3BA;;AA+BA;AACA;AACA,kBADA;AAEA,gBAFA,EAhCA;;AAoCA;AACA;AACA,kBADA;AAEA,gBAFA,EArCA;;AAyCA;AACA;AACA,kBADA;AAEA,iBAFA,EA1CA;;AA8CA;AACA;AACA,kBADA;AAEA,kBAFA,EA/CA;;AAmDA;AACA;AACA,kBADA;AAEA,kBAFA,EApDA;;AAwDA;AACA;AACA,oBADA;AAEA,mBAFA,EAzDA;;AA6DA;AACA;AACA,oBADA;AAEA,mBAFA,EA9DA,EAFA;;;AAqEA,MArEA,kBAqEA;AACA;AACA,mBADA;AAEA,cAFA;AAGA;AACA,YADA;AAEA,YAFA,EAHA;;AAOA,kBAPA;AAQA,kBARA;AASA,oBATA;AAUA,iBAVA;AAWA,wBAXA;AAYA,qBAZA;AAaA,iBAbA;;AAeA,GArFA;AAsFA;AACA,cADA,wBACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA,KAXA;AAYA,cAZA,wBAYA;AACA;AACA,KAdA,EAtFA;;AAsGA;AACA;AACA,aADA,mBACA,CADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAjBA;AAkBA,gBAlBA,EADA;;AAqBA;AACA,aADA,mBACA,CADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAjBA;AAkBA,gBAlBA,EArBA,EAtGA;;;AAgJA,SAhJA,qBAgJA;AACA;AACA,GAlJA;AAmJA,SAnJA,qBAmJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAPA;;;;AAWA,UAXA,aAWA;AACA;AACA,SAbA;AAcA;;AAEA,KAhBA;AAiBA;AACA,GAvKA;AAwKA;AACA,UADA,kBACA,IADA,EACA;AACA;AACA;AACA;AACA;AACA,KANA;AAOA,YAPA,oBAOA,CAPA,EAOA,IAPA,EAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cADA,GACA,cADA,EACA,CADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA,wBAFA,gDAEA,GAFA;AAGA;AACA;AACA,eAFA,MAEA;AACA;AACA,eAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAHA;AAIA,iBALA,EAKA,CALA;AAMA,eAjBA,EAEA;AAgBA,aAlBA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAHA;AAIA,aALA,EAKA,CALA;AAMA;AACA;AACA;AACA;AACA;AACA,KAtDA;AAuDA,UAvDA,kBAuDA,GAvDA,EAuDA,CAvDA,EAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA;AAIA,OALA,EAKA,CALA;AAMA,KApEA;AAqEA,cArEA,sBAqEA,IArEA,EAqEA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,EAKA,GALA;AAMA,KAlFA;AAmFA,YAnFA,oBAmFA,IAnFA,EAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA;AACA,OARA,EAQA,CARA;AASA;AACA,KArGA;AAsGA,gBAtGA,wBAsGA,IAtGA,EAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA,2BAFA;AAGA;AACA;AACA;AACA;AACA,aAFA,EAEA,GAFA;AAGA,WARA;AASA;AACA;AACA,WAXA;;AAaA,OAnBA,MAmBA;AACA;AACA;AACA;AACA,KA9HA;AA+HA,cA/HA,wBA+HA;;;;;;;AAOA,KAtIA;AAuIA,cAvIA,wBAuIA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,KAlKA;AAmKA,aAnKA,uBAmKA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,4BADA;AAEA,yCAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,WATA;;AAWA;AACA,KApLA;AAqLA,aArLA,qBAqLA,IArLA,EAqLA,KArLA,EAqLA;AACA;AACA;AACA,4CADA;AAEA,0BAFA,kDAEA,GAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAHA;AAIA,eAbA,EAEA;AAYA,aAdA;AAeA;AACA;AACA;AACA,SAlBA;AAmBA;AACA,KA3MA;AA4MA,cA5MA,sBA4MA,IA5MA,EA4MA,KA5MA,EA4MA;;AAEA;;AAEA,KAhNA;AAiNA,YAjNA,sBAiNA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA,OAFA,EATA;AAYA,UAZA,kDAYA,CAZA;AAaA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,4BADA,EACA,KADA;;AAGA,aAJA,MAIA;AACA;AACA;AACA,WAxBA,EAYA;AAaA,SAzBA;;AA2BA;AACA;AACA,KA9OA;AA+OA,iBA/OA,yBA+OA,IA/OA,EA+OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBADA;AAEA,YAFA;AAGA,YAHA;AAIA,eAJA;AAKA,eALA;AAMA,kBANA;AAOA,kBAPA;AAQA,gBARA;AASA,iBATA;AAUA,kBAVA;AAWA,oCAXA;AAYA,yBAZA;AAaA,sBAbA;AAcA,iBAdA;AAeA,sBAfA;;AAiBA;AACA;AACA,KAxQA;AAyQA,WAzQA,qBAyQA,EAzQA;AA0QA,UA1QA,kBA0QA,CA1QA,EA0QA;AACA;AACA,KA5QA;AA6QA,QA7QA,kBA6QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KApRA,EAxKA,E;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAA;AAAuuC,CAAgB,koCAAG,EAAC,C;;;;;;;;;;;ACA3vC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/shmily-drag-image/components/shmily-drag-image/shmily-drag-image.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./shmily-drag-image.vue?vue&type=template&id=39e8887d&scoped=true&\"\nvar renderjs\nimport script from \"./shmily-drag-image.vue?vue&type=script&lang=js&\"\nexport * from \"./shmily-drag-image.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shmily-drag-image.vue?vue&type=style&index=0&id=39e8887d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39e8887d\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/shmily-drag-image/components/shmily-drag-image/shmily-drag-image.vue\"\nexport default component.exports","export * from \"-!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=template&id=39e8887d&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"con\">\r\n    <template v-if=\"viewWidth\">\r\n      <movable-area class=\"area\" :style=\"{ height: areaHeight }\" @mouseenter=\"mouseenter\" @mouseleave=\"mouseleave\">\r\n        <movable-view v-for=\"(item, index) in imageList\" :key=\"item.id\" class=\"view\" direction=\"all\" :y=\"item.y\"\r\n          :x=\"item.x\" :damping=\"40\" :disabled=\"item.disable\" @change=\"onChange($event, item)\"\r\n          @touchstart=\"touchstart(item)\" @mousedown=\"touchstart(item)\" @touchend=\"touchend(item)\"\r\n          @mouseup=\"touchend(item)\" :style=\"{\r\n          width: viewWidth + 'px', \r\n          height: viewWidth + 'px', \r\n          'z-index': item.zIndex, \r\n          opacity: item.opacity \r\n        }\">\r\n          <view class=\"area-con\" :style=\"{\r\n            width: childWidth, \r\n            height: childWidth, \r\n            borderRadius: borderRadius + 'rpx',\r\n            transform: 'scale(' + item.scale + ')' \r\n          }\">\r\n            <image class=\"pre-image\" :src=\"item.src\" mode=\"aspectFill\"></image>\r\n            <view class=\"del-con\" @click=\"delImages(item, index)\" @touchstart.stop=\"delImageMp(item, index)\"\r\n              @touchend.stop=\"nothing()\" @mousedown.stop=\"nothing()\" @mouseup.stop=\"nothing()\">\r\n              <view class=\"del-wrap\">\r\n                <image class=\"del-image\"\r\n                  src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMDowNzoyNSAyMTo1NDoyOU4TkJAAAADcSURBVFhH7ZfRCoMwDEXLvkjwwVf/bH/emmAyN6glTW9WBjsgwm28OeCLpj81Sil7zvlJ90UiONS/yY5VogsO6XrBg3IEQ5a/s8vRSWUAKmLqp2w5jz5BiNQEGMo3GbloDLtFXJ1IkaEuhAiiY6gEIqB4yqACSk9piIBiKQ8VUFpLviKg3C2rESKgWERCBZSWiEfgIfffYvrrsAgoISJ3Apy3zuTxcSxLQkV6ykNEPKVQkZEyiAiiZKgDIaC4upACSlcn5fM/+WuDCAHF1E/Z/N9AhkMZnPNDPI+UDjPIXgAQIGjNAAAAAElFTkSuQmCC\">\r\n                </image>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </movable-view>\r\n        <view class=\"add\" v-if=\"imageList.length < number\"\r\n          :style=\"{ top: add.y, left: add.x, width: viewWidth + 'px', height: viewWidth + 'px' }\" @click=\"addImages\">\r\n          <view class=\"add-wrap\" :style=\"{ width: childWidth, height: childWidth, borderRadius: borderRadius + 'rpx' }\">\r\n            <image style=\"width: 54rpx;height: 54rpx;\"\r\n              src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAABIUlEQVRoQ+2a2w2DMAxFeQzWrsMUbadAsEw3S1CqVgppKwLX8BEOP4iHTXx8uUgWdVXoVhdaV0VhSmf7vr/H8V3XzY6V3P9iD+nYOI5P7/01LMI596AwoZV0TIBXIUWFXhKLFBWYSFGhhxQN6SFFQ5i4ogITKSr0cEVDekjRECauqMBEigq9U7piOk2yAti27SUe5ljlTfPEQ6KZecTvwl4P3ytvOv06R2HDMNzes7+6aRrvnHvtf50L13Lp50rx88zcvNlS3JpwKQ67XyK04nq2nFbk/LqVjin0TvmBNgQ2S4UUDcliHgpMpKjQwxUN6SFFQ5i4ogITKSr0cEVDekjRECauqMAsVoph+hVPtYr5+03p9tbYQ96xrYtT4ootbAJGVxxVTapVswAAAABJRU5ErkJggg==\">\r\n            </image>\r\n          </view>\r\n        </view>\r\n      </movable-area>\r\n\r\n    </template>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    emits: ['input', 'update:modelValue'],\r\n    props: {\r\n      // 排序图片\r\n      value: {\r\n        type: Array,\r\n        default: function() {\r\n          return []\r\n        }\r\n      },\r\n      // 排序图片\r\n      modelValue: {\r\n        type: Array,\r\n        default: function() {\r\n          return []\r\n        }\r\n      },\r\n      // 从 list 元素对象中读取的键名\r\n      keyName: {\r\n        type: String,\r\n        default: null\r\n      },\r\n      // 选择图片数量限制\r\n      number: {\r\n        type: Number,\r\n        default: 6\r\n      },\r\n      // 图片父容器宽度（实际显示的图片宽度为 imageWidth / 1.1 ），单位 rpx\r\n      // imageWidth > 0 则 cols 无效\r\n      imageWidth: {\r\n        type: Number,\r\n        default: 0\r\n      },\r\n      // 图片列数\r\n      cols: {\r\n        type: Number,\r\n        default: 3\r\n      },\r\n      // 图片圆角，单位 rpx\r\n      borderRadius: {\r\n        type: Number,\r\n        default: 0\r\n      },\r\n      // 图片周围空白填充，单位 rpx\r\n      padding: {\r\n        type: Number,\r\n        default: 10\r\n      },\r\n      // 拖动图片时放大倍数 [0, ∞)\r\n      scale: {\r\n        type: Number,\r\n        default: 1.1\r\n      },\r\n      // 拖动图片时不透明度\r\n      opacity: {\r\n        type: Number,\r\n        default: 0.7\r\n      },\r\n      // 自定义添加\r\n      addImage: {\r\n        type: Function,\r\n        default: null\r\n      },\r\n      // 删除确认\r\n      delImage: {\r\n        type: Function,\r\n        default: null\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        imageList: [],\r\n        width: 0,\r\n        add: {\r\n          x: 0,\r\n          y: 0\r\n        },\r\n        colsValue: 0,\r\n        viewWidth: 0,\r\n        tempItem: null,\r\n        timer: null,\r\n        changeStatus: true,\r\n        preStatus: true,\r\n        first: true,\r\n      }\r\n    },\r\n    computed: {\r\n      areaHeight() {\r\n        let height = ''\r\n        // return '355px'\r\n        if (this.imageList.length < this.number) {\r\n          height = (Math.ceil((this.imageList.length + 1) / this.colsValue) * this.viewWidth).toFixed() + 'px'\r\n        } else {\r\n          height = (Math.ceil(this.imageList.length / this.colsValue) * this.viewWidth).toFixed() + 'px'\r\n        }\r\n        console.log('areaHeight', height)\r\n        return height\r\n      },\r\n      childWidth() {\r\n        return this.viewWidth - this.rpx2px(this.padding) * 2 + 'px'\r\n      },\r\n    },\r\n    watch: {\r\n      value: {\r\n        handler(n) {\r\n          if (!this.first && this.changeStatus) {\r\n            console.log('watch', n)\r\n            let flag = false\r\n            for (let i = 0; i < n.length; i++) {\r\n              if (flag) {\r\n                this.addProperties(this.getSrc(n[i]))\r\n                continue\r\n              }\r\n              if (this.imageList.length === i || this.imageList[i].src !== this.getSrc(n[i])) {\r\n                flag = true\r\n                this.imageList.splice(i)\r\n                this.addProperties(this.getSrc(n[i]))\r\n              }\r\n            }\r\n          }\r\n        },\r\n        deep: true\r\n      },\r\n      modelValue: {\r\n        handler(n) {\r\n          if (!this.first && this.changeStatus) {\r\n            console.log('watch', n)\r\n            let flag = false\r\n            for (let i = 0; i < n.length; i++) {\r\n              if (flag) {\r\n                this.addProperties(this.getSrc(n[i]))\r\n                continue\r\n              }\r\n              if (this.imageList.length === i || this.imageList[i].src !== this.getSrc(n[i])) {\r\n                flag = true\r\n                this.imageList.splice(i)\r\n                this.addProperties(this.getSrc(n[i]))\r\n              }\r\n            }\r\n          }\r\n        },\r\n        deep: true\r\n      },\r\n    },\r\n    created() {\r\n      this.width = uni.getSystemInfoSync().windowWidth\r\n    },\r\n    mounted() {\r\n      const query = uni.createSelectorQuery().in(this)\r\n      query.select('.con').boundingClientRect(data => {\r\n        this.colsValue = this.cols\r\n        this.viewWidth = data.width / this.cols\r\n        if (this.imageWidth > 0) {\r\n          this.viewWidth = this.rpx2px(this.imageWidth)\r\n          this.colsValue = Math.floor(data.width / this.viewWidth)\r\n        }\r\n        let list = this.value\r\n        // #ifdef VUE3\r\n        list = this.modelValue\r\n        // #endif\r\n        for (let item of list) {\r\n          this.addProperties(this.getSrc(item))\r\n        }\r\n        this.first = false\r\n\r\n      })\r\n      query.exec()\r\n    },\r\n    methods: {\r\n      getSrc(item) {\r\n        if(this.keyName !== null) {\r\n          return item[this.keyName]\r\n        }\r\n        return item\r\n      },\r\n      onChange(e, item) {\r\n        if (!item) return\r\n        item.oldX = e.detail.x\r\n        item.oldY = e.detail.y\r\n        if (e.detail.source === 'touch') {\r\n          if (item.moveEnd) {\r\n            item.offset = Math.sqrt(Math.pow(item.oldX - item.absX * this.viewWidth, 2) + Math.pow(item.oldY - item\r\n              .absY * this.viewWidth, 2))\r\n          }\r\n          let x = Math.floor((e.detail.x + this.viewWidth / 2) / this.viewWidth)\r\n          if (x >= this.colsValue) return\r\n          let y = Math.floor((e.detail.y + this.viewWidth / 2) / this.viewWidth)\r\n          let index = this.colsValue * y + x\r\n          if (item.index != index && index < this.imageList.length) {\r\n            this.changeStatus = false\r\n            for (let obj of this.imageList) {\r\n              if (item.index > index && obj.index >= index && obj.index < item.index) {\r\n                this.change(obj, 1)\r\n              } else if (item.index < index && obj.index <= index && obj.index > item.index) {\r\n                this.change(obj, -1)\r\n              } else if (obj.id != item.id) {\r\n                obj.offset = 0\r\n                obj.x = obj.oldX\r\n                obj.y = obj.oldY\r\n                setTimeout(() => {\r\n                  this.$nextTick(() => {\r\n                    obj.x = obj.absX * this.viewWidth\r\n                    obj.y = obj.absY * this.viewWidth\r\n                  })\r\n                }, 0)\r\n              }\r\n            }\r\n            item.index = index\r\n            item.absX = x\r\n            item.absY = y\r\n            if (!item.moveEnd) {\r\n              setTimeout(() => {\r\n                this.$nextTick(() => {\r\n                  item.x = item.absX * this.viewWidth\r\n                  item.y = item.absY * this.viewWidth\r\n                })\r\n              }, 0)\r\n            }\r\n            // console.log('bbb', JSON.parse(JSON.stringify(item)));\r\n            this.sortList()\r\n          }\r\n        }\r\n      },\r\n      change(obj, i) {\r\n        obj.index += i\r\n        obj.offset = 0\r\n        obj.x = obj.oldX\r\n        obj.y = obj.oldY\r\n        obj.absX = obj.index % this.colsValue\r\n        obj.absY = Math.floor(obj.index / this.colsValue)\r\n        setTimeout(() => {\r\n          this.$nextTick(() => {\r\n            obj.x = obj.absX * this.viewWidth\r\n            obj.y = obj.absY * this.viewWidth\r\n          })\r\n        }, 0)\r\n      },\r\n      touchstart(item) {\r\n        this.imageList.forEach(v => {\r\n          v.zIndex = v.index + 9\r\n        })\r\n        item.zIndex = 99\r\n        item.moveEnd = true\r\n        this.tempItem = item\r\n        this.timer = setTimeout(() => {\r\n          item.scale = this.scale\r\n          item.opacity = this.opacity\r\n          clearTimeout(this.timer)\r\n          this.timer = null\r\n        }, 200)\r\n      },\r\n      touchend(item) {\r\n        this.previewImage(item)\r\n        item.scale = 1\r\n        item.opacity = 1\r\n        item.x = item.oldX\r\n        item.y = item.oldY\r\n        item.offset = 0\r\n        item.moveEnd = false\r\n        setTimeout(() => {\r\n          this.$nextTick(() => {\r\n            item.x = item.absX * this.viewWidth\r\n            item.y = item.absY * this.viewWidth\r\n            this.tempItem = null\r\n            this.changeStatus = true\r\n          })\r\n          // console.log('ccc', JSON.parse(JSON.stringify(item)));\r\n        }, 0)\r\n        // console.log('ddd', JSON.parse(JSON.stringify(item)));\r\n      },\r\n      previewImage(item) {\r\n        if (this.timer && this.preStatus && this.changeStatus && item.offset < 28.28) {\r\n          clearTimeout(this.timer)\r\n          this.timer = null\r\n          const list = this.value || this.modelValue\r\n          let srcList = list.map(v => this.getSrc(v))\r\n          console.log(list, srcList);\r\n          uni.previewImage({\r\n            urls: srcList,\r\n            current: item.src,\r\n            success: () => {\r\n              this.preStatus = false\r\n              setTimeout(() => {\r\n                this.preStatus = true\r\n              }, 600)\r\n            },\r\n            fail: (e) => {\r\n              console.log(e);\r\n            }\r\n          })\r\n        } else if (this.timer) {\r\n          clearTimeout(this.timer)\r\n          this.timer = null\r\n        }\r\n      },\r\n      mouseenter() {\r\n        //#ifdef H5\r\n        this.imageList.forEach(v => {\r\n          v.disable = false\r\n        })\r\n        //#endif\r\n\r\n      },\r\n      mouseleave() {\r\n        //#ifdef H5\r\n        if (this.tempItem) {\r\n          this.imageList.forEach(v => {\r\n            v.disable = true\r\n            v.zIndex = v.index + 9\r\n            v.offset = 0\r\n            v.moveEnd = false\r\n            if (v.id == this.tempItem.id) {\r\n              if (this.timer) {\r\n                clearTimeout(this.timer)\r\n                this.timer = null\r\n              }\r\n              v.scale = 1\r\n              v.opacity = 1\r\n              v.x = v.oldX\r\n              v.y = v.oldY\r\n              this.$nextTick(() => {\r\n                v.x = v.absX * this.viewWidth\r\n                v.y = v.absY * this.viewWidth\r\n                this.tempItem = null\r\n              })\r\n            }\r\n          })\r\n          this.changeStatus = true\r\n        }\r\n        //#endif\r\n      },\r\n      addImages() {\r\n        if (typeof this.addImage === 'function') {\r\n          this.addImage.bind(this)()\r\n        } else {\r\n          let checkNumber = this.number - this.imageList.length\r\n          uni.chooseImage({\r\n            count: checkNumber,\r\n            sourceType: ['album', 'camera'],\r\n            success: res => {\r\n              let count = checkNumber <= res.tempFilePaths.length ? checkNumber : res.tempFilePaths.length\r\n              for (let i = 0; i < count; i++) {\r\n                this.addProperties(res.tempFilePaths[i])\r\n              }\r\n              this.sortList()\r\n            }\r\n          })\r\n        }\r\n      },\r\n      delImages(item, index) {\r\n        if (typeof this.delImage === 'function') {\r\n          this.delImage(() => {\r\n            this.imageList.splice(index, 1)\r\n            for (let obj of this.imageList) {\r\n              if (obj.index > item.index) {\r\n                obj.index -= 1\r\n                obj.x = obj.oldX\r\n                obj.y = obj.oldY\r\n                obj.absX = obj.index % this.colsValue\r\n                obj.absY = Math.floor(obj.index / this.colsValue)\r\n                this.$nextTick(() => {\r\n                  obj.x = obj.absX * this.viewWidth\r\n                  obj.y = obj.absY * this.viewWidth\r\n                })\r\n              }\r\n            }\r\n            this.add.x = (this.imageList.length % this.colsValue) * this.viewWidth + 'px'\r\n            this.add.y = Math.floor(this.imageList.length / this.colsValue) * this.viewWidth + 'px'\r\n            this.sortList()\r\n          })\r\n        }\r\n      },\r\n      delImageMp(item, index) {\r\n        //#ifdef MP\r\n        this.delImages(item, index)\r\n        //#endif\r\n      },\r\n      sortList() {\r\n        console.log('sortList');\r\n        const result = []\r\n        let source = this.value\r\n        // #ifdef VUE3\r\n        source = this.modelValue\r\n        // #endif\r\n        \r\n        let list = this.imageList.slice()\r\n        list.sort((a, b) => {\r\n          return a.index - b.index\r\n        })\r\n        for (let s of list) {\r\n          let item = source.find(d => this.getSrc(d) == s.src)\r\n          if (item) {\r\n            result.push(item)\r\n          } else {\r\n            if(this.keyName !== null) {\r\n              result.push({\r\n                [this.keyName]: s.src\r\n              })\r\n            } else {\r\n              result.push(s.src)\r\n            }\r\n          }\r\n        }\r\n        \r\n        this.$emit(\"input\", result);\r\n        this.$emit(\"update:modelValue\", result);\r\n      },\r\n      addProperties(item) {\r\n        console.log(item);\r\n        let absX = this.imageList.length % this.colsValue\r\n        let absY = Math.floor(this.imageList.length / this.colsValue)\r\n        let x = absX * this.viewWidth\r\n        let y = absY * this.viewWidth\r\n        this.imageList.push({\r\n          src: item,\r\n          x,\r\n          y,\r\n          oldX: x,\r\n          oldY: y,\r\n          absX,\r\n          absY,\r\n          scale: 1,\r\n          zIndex: 9,\r\n          opacity: 1,\r\n          index: this.imageList.length,\r\n          id: this.guid(16),\r\n          disable: false,\r\n          offset: 0,\r\n          moveEnd: false\r\n        })\r\n        this.add.x = (this.imageList.length % this.colsValue) * this.viewWidth + 'px'\r\n        this.add.y = Math.floor(this.imageList.length / this.colsValue) * this.viewWidth + 'px'\r\n      },\r\n      nothing() {},\r\n      rpx2px(v) {\r\n        return this.width * v / 750\r\n      },\r\n      guid(len = 32) {\r\n        const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('')\r\n        const uuid = []\r\n        const radix = chars.length\r\n        for (let i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix]\r\n        uuid.shift()\r\n        return `u${uuid.join('')}`\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .con {\r\n    // padding: 30rpx;\r\n\r\n    .area {\r\n      width: 100%;\r\n\r\n      .view {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n\r\n        .area-con {\r\n          position: relative;\r\n          overflow: hidden;\r\n\r\n          .pre-image {\r\n            width: 100%;\r\n            height: 100%;\r\n          }\r\n\r\n          .del-con {\r\n            position: absolute;\r\n            top: 0rpx;\r\n            right: 0rpx;\r\n            padding: 0 0 20rpx 20rpx;\r\n\r\n            .del-wrap {\r\n              width: 36rpx;\r\n              height: 36rpx;\r\n              background-color: rgba(0, 0, 0, 0.4);\r\n              border-radius: 0 0 0 10rpx;\r\n              display: flex;\r\n              justify-content: center;\r\n              align-items: center;\r\n\r\n              .del-image {\r\n                width: 20rpx;\r\n                height: 20rpx;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .add {\r\n        position: absolute;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n\r\n        .add-wrap {\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          background-color: #eeeeee;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\n","import mod from \"-!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=style&index=0&id=39e8887d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuilderx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shmily-drag-image.vue?vue&type=style&index=0&id=39e8887d&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1663330786650\n      var cssReload = require(\"D:/hbuilderx/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}